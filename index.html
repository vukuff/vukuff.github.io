<!DOCTYPE html>
<html>
<head>
    <title>HubSpot CORS Test</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        pre { background: #f5f5f5; padding: 15px; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>HubSpot CORS PoC</h1>
    <button id="testBtn">TEST ET</button>
    <pre id="result"></pre>

    <script>
        document.getElementById("testBtn").addEventListener("click", function() {
            const resultEl = document.getElementById("result");
            resultEl.innerHTML = "İstek gönderiliyor...";

            // DÜZGÜN BODY OLMASI KRİTİK
            const postBody = {
                project: "js",
                logger: "javascript",
                platform: "javascript",
                message: "CORS test from GitHub Pages"
            };

            fetch("https://exceptions-eu1.hubspot.com/frontend/observability/page-tracking/store/?sentry_version=7&sentry_client=raven-js%2F3.19.1&deployable=setup-guide-ui", {
                method: "POST",
                headers: {
                    "Content-Type": "text/plain;charset=UTF-8",
                    "Origin": "https://vukuff.github.io",
                    "Accept": "*/*"
                },
                body: JSON.stringify(postBody)  // Body EKLENDİ
            })
            .then(response => {
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                return response.text();
            })
            .then(data => {
                resultEl.innerHTML = `<span class="success">BAŞARILI!</span>\n\n${data}`;
                console.log("API Yanıtı:", data);
            })
            .catch(error => {
                resultEl.innerHTML = `<span class="error">HATA: ${error.message}</span>`;
                console.error("Hata detayı:", error);
            });
        });
    </script>
</body>
</html>
